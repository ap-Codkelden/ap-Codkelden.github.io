<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css">
 <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.25.1/moment.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.25.1/locale/uk.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
  <!-- 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.min.js"></script>
  <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script> 
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datasource@0.1.0"></script> 
  -->
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      font-size: 12pt;
    }
    .chart-title {
      font-family: 'Roboto';
      text-align: center;
      font-weight: bold;
      color: #000;
      font-size: 16pt;
    }
  canvas {
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
  }
  .chart {
     width: 60%;
     margin: 0 auto;
  }
      .chartjs-tooltip {
      opacity: 1;
      position: absolute;
      background: rgba(0, 0, 0, .7);
      color: white;
      border-radius: 3px;
      -webkit-transition: all .1s ease;
      transition: all .1s ease;
      pointer-events: none;
      -webkit-transform: translate(-50%, 0);
      transform: translate(-50%, 0);
      padding: 4px;
    }

    .chartjs-tooltip-key {
      display: inline-block;
      width: 10px;
      height: 10px;
    }
  </style>
</head>
<body>
  <div class="chart">
    <p class="chart-title">Загальна кількість виявлених випадків</p>
    <canvas id="bar-chart" height="250" width="700"></canvas>
    <div class="chartjs-tooltip" id="tooltip"></div>
  </div>
<script type="text/javascript">
var customTooltips = function(tooltip) {
      $(this._chart.canvas).css('cursor', 'pointer');

      var positionY = this._chart.canvas.offsetTop;
      var positionX = this._chart.canvas.offsetLeft;

      $('.chartjs-tooltip').css({
        opacity: 0,
      });

      if (!tooltip || !tooltip.opacity) {
        return;
      }

      if (tooltip.dataPoints.length > 0) {
        tooltip.dataPoints.forEach(function(dataPoint) {
          var content = [moment(dataPoint.xLabel).format('MMM D'), dataPoint.yLabel].join(': ');
          var $tooltip = $('#tooltip');

          $tooltip.html(content);
          $tooltip.css({
            opacity: 1,
            top: positionY + dataPoint.y + 'px',
            left: positionX + dataPoint.x + 'px',
          });
        });
      }
    };

  var chart_font_size = window.innerWidth < 500 ? 11 : 14;
var chart_options = {
    legend: { display: false },
    maintainAspectRatio: false,
    scales: {
      xAxes: [{
        type: 'time',
        time: {
                unit: 'day'
              },
        labels: ["2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29",
                "2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04",
                "2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10",
                "2020-04-11","2020-04-12","2020-04-13","2020-04-14","2020-04-15","2020-04-16",
                "2020-04-17","2020-04-18","2020-04-19","2020-04-20","2020-04-21","2020-04-22",
                "2020-04-23","2020-04-24","2020-04-25","2020-04-26","2020-04-27","2020-04-28",
                "2020-04-29","2020-04-30","2020-05-01","2020-05-02","2020-05-03"
                ],
        gridLines: {
          display: true,
        },
        ticks: {
          minRotation: 45,
          fontSize: chart_font_size,
          fontColor: '#1A2B2B',
          autoSkip: false,
          maxTicksLimit: 15,
        },
      }],
      yAxes: [{
        gridLines: {
          drawBorder: false,
        },
        ticks: {
          fontSize: 14,
          fontColor: '#1A2B2B',
          beginAtZero: true,
          userCallback: function(value, index, values) {
            return value.toLocaleString();
          },
        },
      }],
       /*     plugins: {
            datasource: {
              type: 'json',
                url: '/data.json',
                rowMapping: 'dataset',
            indexLabels: 'labels',
            }
          }*/
    },
    tooltips: {
            enabled: false,
            mode: 'index',
            intersect: false,
            custom: customTooltips
          }
};

  var ctx = document.getElementById("bar-chart");
  var data = {
    labels: ["2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29",
                "2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04",
                "2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10",
                "2020-04-11","2020-04-12","2020-04-13","2020-04-14","2020-04-15","2020-04-16",
                "2020-04-17","2020-04-18","2020-04-19","2020-04-20","2020-04-21","2020-04-22",
                "2020-04-23","2020-04-24","2020-04-25","2020-04-26","2020-04-27","2020-04-28",
                "2020-04-29","2020-04-30","2020-05-01","2020-05-02","2020-05-03"
                ],
        datasets: [
              {borderWidth: 2,
              borderColor: '#367E93',
              pointBorderColor: '#367E93',
              pointBackgroundColor: '#fff',
              pointBorderWidth: 3,
              pointHoverRadius: 3,
              pointHoverBackgroundColor: '#367E93',
              pointHoverBorderColor: '#367E93',
              pointHoverBorderWidth: 5,
              pointRadius: 1,
              pointHitRadius: 5,
                data: [
                        1,1,1,1,2,3,3,3,4,5,5,5,5,5,5,5,6,6,6,9,9,9,9,12,13,13,15,20,27,29,40,46,54,55,58,61,72,101,106,106
                      ]
                    }
                    ]
                  };
  var chart = new Chart(ctx, {
    type: 'line',
    data: data,
    options: chart_options
});
    // console.log(chart.data);
</script>
</body>
</html>

